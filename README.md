#  cpp-program
大一的cpp作业
这是我在大一下学期的cpp作业，由于个人能力的确有限且时间较为紧迫,<br>
所以做出来的作业肯定会有一些不足之处,希望大家可以多多指正。<br>
# easyx
这次的项目主要是基于easyx的图形库[easyx的下载](https://easyx.cn/)<br>
easyx的一个教程[Easyx库基础用法教程](https://blog.csdn.net/qq_61797201/article/details/122827689)<br>
## 项目报告：扫雷游戏
### 1. 项目介绍

扫雷游戏是一款经典的单人益智游戏，玩家需要根据数字提示避开地雷并揭开所有非地雷方块。本项目使用了 `easyx` 图形库来实现图形界面和用户交互。

### 2. 设计思路和实现方法

在本项目中，设计了 `MinesweeperGame` 类来管理游戏的逻辑和状态。主要成员变量包括 `map` 类型的地图对象、标记计数器、游戏结束标志和获胜标志等。<br>
使用了 `initMap` 函数来初始化地图，随机生成地雷并计算每个格子周围地雷的数量。绘制地图使用了 `drawMap` 函数，根据地图数组的值绘制对应的图像。<br>
通过 `handleMouseEvent` 函数处理鼠标事件，包括左键点击打开方块和右键点击标记雷等操作。游戏循环使用 `gameLoop` 函数，不断处理鼠标事件和绘制地图，判断游戏是否结束或获胜。
### 3. 关键算法和功能

1. 初始化地图和地雷：在 `Map` 类的构造函数中，通过随机生成地雷的位置来初始化地图。使用 `srand` 函数设置随机数种子，<br>
然后使用 `rand` 函数生成随机数来确定地雷的位置。生成的地雷位置被标记为 -1，其他格子被初始化为 0。随后，通过遍历地图数组，<br>
计算每个格子周围的地雷数量，并将地雷数量加上 20。

2. 绘制地图：`MinesweeperGame` 类的 `drawMap` 方法用于绘制游戏地图。根据地图中的值，选择不同的图片进行绘制，包括数字、地雷、未打开的方块和旗子。

3. 打开空白格子：`MinesweeperGame` 类的 `openNull` 方法用于递归地打开空白格子及其周围的格子。当点击一个空白格子时，该方法会将周围的空白格子递归地打开。

4. 判断是否踩雷：`MinesweeperGame` 类的 `judge` 方法用于判断玩家是否踩雷。当点击一个格子时，如果该格子是地雷，游戏失败，所有地雷格子被打开并显示在图形界面上。

5. 判断是否获胜：`MinesweeperGame` 类的 `victory` 方法用于判断玩家是否获胜。当玩家正确标记的雷的数量等于地雷总数时，游戏胜利。

6. 处理鼠标事件：`MinesweeperGame` 类的 `handleMouseEvent` 方法用于处理鼠标事件。根据鼠标按键和点击的位置，执行相应的操作，包括打开格子和标记雷。

7. 游戏循环：`MinesweeperGame` 类的 `gameLoop` 方法是游戏的主循环。在循环中，不断处理鼠标事件、绘制地图，并根据游戏状态判断游戏是否结束或获胜。

以上算法和功能使得扫雷游戏能够正常运行，并提供了游戏的核心逻辑和用户交互功能。
戏结束和获胜判断：根据点击的方块是否是地雷判断游戏是否结束，当标记的雷数等于地雷数量时判断游戏获胜。

### 4. 图形界面和交互设计

使用 `easyx` 图形库实现图形界面和用户交互。绘制地图时，根据地图数组的值选择合适的图像进行绘制，包括数字方块、地雷和标记的雷等。通过监听鼠标事件，处理左键点击打开方块和右键点击标记雷的操作。

### 5. 功能演示和测试

经过测试，扫雷游戏实现了以下功能：

- 鼠标左键点击打开方块，右键点击标记雷。
- 点击到雷时游戏结束，弹出提示框，点击确定重新开始，点击取消退出游戏。
- 标记正确的雷数等于地雷数时游戏胜利，弹出提示框，点击确定重新开始，点击取消退出游戏。
- 点击到空白方块时，自动打开周围的方块。
- 点击到数字方块时，显示数字。

### 6. 改进

扫雷游戏在功能实现上已经较为完善，但还可以进一步改进和扩展，例如：

- 添加计时功能，记录游戏时间。
- 提供不同难度的游戏模式，例如初级、中级和高级，难度级别可以影响地雷数量和地图大小。
- 添加音效和背景音乐，增加游戏的乐趣和氛围。

